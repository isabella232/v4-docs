"use strict";(self.webpackChunkpooltogether=self.webpackChunkpooltogether||[]).push([[725],{3905:function(e,t,r){r.d(t,{Zo:function(){return u},kt:function(){return h}});var a=r(7294);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,a,i=function(e,t){if(null==e)return{};var r,a,i={},n=Object.keys(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var l=a.createContext({}),c=function(e){var t=a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},u=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var r=e.components,i=e.mdxType,n=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=c(r),h=i,m=d["".concat(l,".").concat(h)]||d[h]||p[h]||n;return r?a.createElement(m,o(o({ref:t},u),{},{components:r})):a.createElement(m,o({ref:t},u))}));function h(e,t){var r=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var n=r.length,o=new Array(n);o[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,o[1]=s;for(var c=2;c<n;c++)o[c]=r[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,r)}d.displayName="MDXCreateElement"},9488:function(e,t,r){r.r(t),r.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return u},default:function(){return d}});var a=r(7462),i=r(3366),n=(r(7294),r(3905)),o=["components"],s={id:"smart-contracts",title:"Smart Contracts Overview",skug:"/reference",sidebar_position:1},l=void 0,c={unversionedId:"reference/smart-contracts",id:"reference/smart-contracts",isDocsHomePage:!1,title:"Smart Contracts Overview",description:"PoolTogether 4.0 is a prize savings network.  Users deposit into the network to win prize money.  The deposits generate yield, which is then distributed as prizes.   These are the two fundamental PoolTogether processes: yield capture and prize distribution.",source:"@site/docs/reference/smart-contracts.md",sourceDirName:"reference",slug:"/reference/smart-contracts",permalink:"/protocol/reference/smart-contracts",editUrl:"https://github.com/pooltogether/v4-docs/tree/main/docs/reference/smart-contracts.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"smart-contracts",title:"Smart Contracts Overview",skug:"/reference",sidebar_position:1},sidebar:"defaultSidebar",previous:{title:"Overview",permalink:"/protocol/sdk/draw-calculator-js/overview"},next:{title:"V4 Testnet",permalink:"/protocol/reference/deployments/testnet"}},u=[{value:"Prize Pools",id:"prize-pools",children:[]},{value:"Prize Split Strategy &amp; Protocol Reserve",id:"prize-split-strategy--protocol-reserve",children:[]},{value:"Draw Beacon &amp; Draw History",id:"draw-beacon--draw-history",children:[]},{value:"Claimable Draw",id:"claimable-draw",children:[]},{value:"Tsunami Draw Calculator",id:"tsunami-draw-calculator",children:[]},{value:"Draw Settings",id:"draw-settings",children:[]}],p={toc:u};function d(e){var t=e.components,s=(0,i.Z)(e,o);return(0,n.kt)("wrapper",(0,a.Z)({},p,s,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"PoolTogether 4.0 is a prize savings network.  Users deposit into the network to win prize money.  The deposits generate yield, which is then distributed as prizes.   These are the two fundamental PoolTogether processes: yield capture and prize distribution."),(0,n.kt)("img",{src:r(6992).Z,alt:"Overview",class:"img-max"}),(0,n.kt)("h1",{id:"yield-capture"},"Yield Capture"),(0,n.kt)("h2",{id:"prize-pools"},"Prize Pools"),(0,n.kt)("p",null,'Yield is captured by Prize Pools.  Users deposit into prize pools and receive "Ticket" tokens in exchange at a 1:1 ratio.  Prize Pools deposit the funds into a service such as Compound, Aave, or Yearn to generate yield.  Users can redeem their tickets for the underlying collateral at any time.'),(0,n.kt)("p",null,"There are no fees in PoolTogether 4.0!"),(0,n.kt)("img",{src:r(2911).Z,alt:"Prize Pool",class:"img-max"}),(0,n.kt)("h2",{id:"prize-split-strategy--protocol-reserve"},"Prize Split Strategy & Protocol Reserve"),(0,n.kt)("p",null,"Each prize pool has a Prize Split Strategy that determines how interest is disbursed.  At any time anyone can tell the Prize Split Strategy to disburse the currently accrued interest.  The strategy will mint Tickets to the Protocol Reserve, which allows the protocol to measure the prize pool's reserve contribution and sweep the funds."),(0,n.kt)("img",{src:r(5762).Z,alt:"Protocol Reserve",class:"img-max"}),(0,n.kt)("h1",{id:"prize-distribution"},"Prize Distribution"),(0,n.kt)("p",null,"Prizes are distributed through regular prize drawings.  Draws are emitted by a Draw Beacon and consist of a random number and a timestamp.  When a new Draw is available users can claim their prizes from the Claimable Draw contract."),(0,n.kt)("p",null,"The Claimable Draw contract holds the prize liquidity for all Draws, and allows users to claim prizes as determined by each draw's Draw Calculator. The Claimable Draw holds a mapping of Draws to Draw Calculators.\nThe default calculator is the Tsunami Draw Calculator, which calculates payouts using the Tsunami algorithm.\nLet's dive into more detail."),(0,n.kt)("h2",{id:"draw-beacon--draw-history"},"Draw Beacon & Draw History"),(0,n.kt)("p",null,"The Draw Beacon acts as the heartbeat of a prize network by periodically creating Draws. It has a start time and a period, which together determine when Draws can be created.  When the period has elapsed, anyone can create a new Draw. The resulting Draw will be pushed onto the Draw History, which stores the last 256 Draws."),(0,n.kt)("p",null,"The Draw is created in two steps:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},'The Draw is "started": the random number request is made to the RNG service.'),(0,n.kt)("li",{parentName:"ol"},'The Draw is "completed": the random number is consumed and a new Draw is pushed to the Draw History.')),(0,n.kt)("img",{src:r(945).Z,alt:"Draw Beacon",class:"img-max"}),(0,n.kt)("h2",{id:"claimable-draw"},"Claimable Draw"),(0,n.kt)("p",null,"Users claim their prizes from the Claimable Draw, which holds the liquidity for all draws for a prize pool.   When a user claims the prizes for a draw:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"The Claimable Draw pulls the Draw information from the Draw History"),(0,n.kt)("li",{parentName:"ul"},"Passes the Draw to the corresponding Draw Calculator to compute the total payout"),(0,n.kt)("li",{parentName:"ul"},"Transfers the payout to the user")),(0,n.kt)("img",{src:r(5018).Z,alt:"Claimable Draw",class:"img-max"}),(0,n.kt)("h2",{id:"tsunami-draw-calculator"},"Tsunami Draw Calculator"),(0,n.kt)("p",null,"The Tsunami Draw Calculator"),(0,n.kt)("h2",{id:"draw-settings"},"Draw Settings"),(0,n.kt)("p",null,'Each Draw has a setting object that determines the prize size and distribution.  The calculator has a "manager" that updates the settings for new Draws.  When the manager updates the settings, the calculator sets itself as the calculator for the draw in the Claimable Draw.  This may seem redundant, but it allows us to swap which calculator the Claimable Draw uses.'))}d.isMDXComponent=!0},5018:function(e,t,r){t.Z=r.p+"assets/images/ClaimableDraw-5412b57314502c9f0bbd4d9617234322.png"},945:function(e,t,r){t.Z=r.p+"assets/images/DrawBeacon-71da533e33d969a5673cee9710b0a717.png"},6992:function(e,t,r){t.Z=r.p+"assets/images/Overview-e8f4b445bfd93e9b23631802ff0e973d.png"},2911:function(e,t,r){t.Z=r.p+"assets/images/PrizePool-2145be885e709e62a8bfb85db37b6bc6.png"},5762:function(e,t,r){t.Z=r.p+"assets/images/ProtocolReserve-91f293c4451731fad4557a73a7761923.png"}}]);